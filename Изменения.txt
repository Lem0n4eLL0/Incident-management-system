исправил создание админа  (проект 25)




(все role отправлять на английском) ещё раз уточнить?
(при patch и создании инцидента добавить возврат поля unit в ответ) да
(если токен не валиден ввиду того, что он истёк по времени то отправлять ответ об ошибке вот в таком формате:
{
  "code": "token_expired",
  "detail": "Given token not valid for any token type"
}
) да  

(всё остальное оставить как есть. Если только убрать те моменты, когда detail внутри detail генерирует ошибку. (Чисто косметика)) ?


(при возврате пользователя после создания, вернуть все поля о нём админу включая токены и прочее)
(last_login перестал записываться)
(попробовать поправить createsuperuser) да
(добавить маршрут разгорирования?)

Нужно добавить запрос на разлогирование авторизованного пользователя без id.
export const logoutMeApi = (): Promise<TServerResponse> => {
  return fetchWithRefresh<TServerResponse>(${URL_API}api/auth/logout_me/, {
    method: HTTP_METHODS.POST,
    headers: {
      'Content-Type': 'application/json;charset=utf-8',
    },
  });
};

(Ещё удали по пути обновления токена возвращение refresh только access обновляй. Я новый refresh не использую иначе вся логика ломается.)










